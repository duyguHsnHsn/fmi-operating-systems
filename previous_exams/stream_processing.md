#  –ü–æ—Ç–æ—á–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—Ç–µ–º–∏ 1,2,3)

### –ó–∞–¥. 1 2016-SE-01

1–î–∞–¥–µ–Ω –µ —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª —Å –∏–º–µ p h i l i p - j - f r y . t x t . –ù–∞–ø–∏—à–µ—Ç–µ shell script –∏/–∏–ª–∏ —Å–µ—Ä–∏—è –æ—Ç –∫–æ–º–∞–Ω–¥–∏,
–∫–æ–∏—Ç–æ –∏–∑–≤–µ–∂–¥–∞—Ç –±—Ä–æ—è —Ä–µ–¥–æ–≤–µ, —Å—ä–¥—ä—Ä–∂–∞—â–∏ –ø–æ–Ω–µ –µ–¥–Ω–∞ —á–µ—Ç–Ω–∞ —Ü–∏—Ñ—Ä–∞ –∏ –Ω–µ—Å—ä–¥—ä—Ä–∂–∞—â–∏ –º–∞–ª–∫–∞ –ª–∞—Ç–∏–Ω—Å–∫–∞
–±—É–∫–≤–∞ –æ—Ç a –¥–æ w .

–ü—Ä–∏–º–µ—Ä–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ —Ñ–∞–π–ª–∞:
````text
123abv23
123zz123
MMU_2.4
–ü—Ä–∏–º–µ—Ä–µ–Ω –∏–∑—Ö–æ–¥:
–ë—Ä–æ—è—Ç –Ω–∞ —Ç—ä—Ä—Å–µ–Ω–∏—Ç–µ —Ä–µ–¥–æ–≤–µ –µ 2
````

````shell
#!/bin/bash

if [[ "${#}" -ne 1 ]]; then
  echo "The script works with one positional argument - path to the file"
  exit 1
fi 

count="$(cat "${1}" | grep -v [a-w] | grep [2,4,6,8] | wc -l)"

echo "The count of wanted lines is: ${count}"

exit 0
````


### –ó–∞–¥. 2 2017-IN-01
–ù–∞–ø–∏—à–µ—Ç–µ —Å–µ—Ä–∏—è –æ—Ç –∫–æ–º–∞–Ω–¥–∏, –∏–∑–≤–µ–∂–¥–∞—â–∏ –Ω–∞ –µ–∫—Ä–∞–Ω–∞ —Å–∞–º–æ –±—Ä–æ—è –Ω–∞ –≤—Å–∏—á–∫–∏ –æ–±–µ–∫—Ç–∏ –≤—ä–≤ —Ñ–∞–π–ª–æ–≤–∞—Ç–∞
—Å–∏—Å—Ç–µ–º–∞, —á–∏–∏—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫ –µ —Ç–µ–∫—É—â–∏—è—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª.

–ó–∞–±–µ–ª–µ–∂–∫–∞: –í—ä–≤ —Ñ–∞–π–ª–æ–≤–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ —Å—ä—Å —Å–∏–≥—É—Ä–Ω–æ—Å—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –¥–æ –∫–æ–∏—Ç–æ –Ω—è–º–∞—Ç–µ –¥–æ—Å—Ç—ä–ø.

````shell
find / -user $(whoami) -print 2>/dev/null | wc -l
# or
find / -uid $(id -u) 2>/dev/null | wc -l
````

### –ó–∞–¥. 3 2017-IN-02 

–ù–∞–ø–∏—à–µ—Ç–µ —Å–µ—Ä–∏—è –æ—Ç –∫–æ–º–∞–Ω–¥–∏, –∫–æ–∏—Ç–æ –∏–∑—Ç—Ä–∏–≤–∞—Ç:

–∞) –≤—Å–∏—á–∫–∏ —Ñ–∞–π–ª–æ–≤–µ –≤ —Ç–µ–∫—É—â–∞—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏ –Ω–µ–π–Ω–∏—Ç–µ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∫–æ–∏—Ç–æ —Å–∞ —Å –Ω—É–ª–µ–≤–∞ –¥—ä–ª–∂–∏–Ω–∞.

–±) 5-–µ –Ω–∞–π-–≥–æ–ª–µ–º–∏ —Ñ–∞–π–ª–∞ –≤ home –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ —Ç–µ–∫—É—â–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –∏ –Ω–µ–π–Ω–∏—Ç–µ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

````shell
# a
find . -type f -size 0 | xargs -I {} rm {}
# b
find . -type f -printf "%p|%s\\n" | sort -t "|" -nr -k 2 | head -n 5| awk -F "|" '{print $1}'
````

### –ó–∞–¥. 4 2017-IN-03 

–ù–∞–ø–∏—à–µ—Ç–µ —Å–µ—Ä–∏—è –æ—Ç –∫–æ–º–∞–Ω–¥–∏, –∫–æ–∏—Ç–æ –æ—Ç —Ñ–∞–π–ª–∞ /etc/passwd –¥–∞ –≤–∑–µ–º–∞—Ç –ø–æ–¥-–Ω–∏–∑, —Å—ä—Å—Ç–æ—è—â —Å–µ
–æ—Ç –≤—Ç–æ—Ä–∞ –∏ —Ç—Ä–µ—Ç–∞ —Ü–∏—Ñ—Ä–∞ –Ω–∞ —Ñ–∞–∫—É–ª—Ç–µ—Ç–Ω–∏—è –Ω–æ–º–µ—Ä –Ω–∞ —Å—Ç—É–¥–µ–Ω—Ç–∏—Ç–µ –æ—Ç —Å–ø–µ—Ü–∏–∞–ª–Ω–æ—Å—Ç –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞, —á–∏–∏—Ç–æ
—Ñ–∞–º–∏–ª–∏–∏ –∑–∞–≤—ä—Ä—à–≤–∞—Ç –Ω–∞ ‚Äú–∞‚Äù. –ò–∑–≤–µ–¥–µ—Ç–µ –∫–æ—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç —Ü–∏—Ñ—Ä–∏ —Å–µ —Å—Ä–µ—â–∞ –Ω–∞–π-—á–µ—Å—Ç–æ –∏ –∫–æ—è –µ —Ç—è.

````shell
# i will write the solution using out course /etc/passwd
cat /etc/passwd | awk -F':' '{print $1 " " $5 }' | awk -F',' '{print $1}' | cut -c3,4 | sort | uniq -c
````

### –ó–∞–¥. 5 2017-SE-01 
–ù–∞–º–µ—Ä–µ—Ç–µ –∏–º–µ–Ω–∞—Ç–∞ –Ω–∞ —Ç–æ–ø 5 —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –≤ —Ç–µ–∫—É—â–∞—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –Ω–∞–π-–º–Ω–æ–≥–æ hardlinks.

````shell
ls -l | sort -rk2 -n | head -n 5 | awk '{print $9}'
````

### –ó–∞–¥. 6 2018-SE-01
–ü—Ä–æ–º–µ–Ω–µ—Ç–µ –ø—Ä–∞–≤–∞—Ç–∞ –Ω–∞ –≤—Å–∏—á–∫–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–∞–º–∏—Ä–∞—â–∏ —Å–µ –Ω—è–∫—ä–¥–µ –≤—ä–≤ –≤–∞—à–∞—Ç–∞ home –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è,
—Ç–∞–∫–∞ —á–µ –¥–∞ —Å—Ç–∞–Ω–∞—Ç —Ç–∞–∫–∏–≤–∞, –∫–∞–∫–≤–∏—Ç–æ –±–∏—Ö–∞ —Å–µ –ø–æ–ª—É—á–∏–ª–∏, –∞–∫–æ –≥–∏ –±—è—Ö—Ç–µ —Å—ä–∑–¥–∞–ª–∏ —Å –º–∞—Å–∫–∞ 0022 .

````shell
find ~/ -type d | xargs -I {} chmod 755 {} 
````

### –ó–∞–¥. 62 2023-SE-03

–ü—Ä–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–µ —á–µ—Å—Ç–æ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ –∏–º–∞–º–µ —Å–ø–∏—Å—ä–∫ –æ—Ç –¥—É–º–∏ (–Ω–∞—Ä–µ—á–µ–Ω–∏ ‚Äú—Å—Ç–æ–ø–¥—É–º–∏‚Äù), –∫–æ–∏—Ç–æ —Å–µ —Å—Ä–µ—â–∞—Ç –ø—Ä–µ–∫–∞–ª–µ–Ω–æ —á–µ—Å—Ç–æ –∏ –Ω–µ –Ω–æ—Å—è—Ç —Å—Ç–æ–π–Ω–æ—Å—Ç –∑–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ—Ç–æ. –¢–∞–∫–∏–≤–∞ –¥—É–º–∏ —Å–∞ –Ω–∞–ø—Ä–∏–º–µ—Ä
‚Äúyou‚Äù, ‚Äúthen‚Äù, ‚Äúfor‚Äù –∏ —Ç.–Ω.
–ù–∞–ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç stopword_candidates.sh , –∫–æ–π—Ç–æ –ø—Ä–∏–µ–º–∞ –∫–∞—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç –∏–º–µ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏ –∏–∑–≤–µ–∂–¥–∞
10-—Ç–µ –¥—É–º–∏, –∫–æ–∏—Ç–æ –Ω–∞–π-–º–Ω–æ–≥–æ –∏–∑–≥–ª–µ–∂–¥–∞—Ç –∫–∞—Ç–æ —Å—Ç–æ–ø-–¥—É–º–∏.
- –ó–∞ –¥–∞ –±—ä–¥–µ —Å—Ç–æ–ø-–¥—É–º–∞, —Ç—Ä—è–±–≤–∞ –±—Ä–æ—è—Ç —Ñ–∞–π–ª–æ–≤–µ, –∫–æ–∏—Ç–æ —è —Å—ä–¥—ä—Ä–∂–∞—Ç ‚â• 3 –ø—ä—Ç–∏ –¥–∞ –µ ‚â•
(–æ–±—â–∏—è –±—Ä–æ–π —Ñ–∞–π–ª–æ–≤–µ)/2
- –ï–¥–Ω–∞ –¥—É–º–∞ –µ –ø–æ-–¥–æ–±—ä—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç –æ—Ç –¥—Ä—É–≥–∞, –∞–∫–æ –∏–º–∞ –ø–æ-–≥–æ–ª—è–º –æ–±—â –±—Ä–æ–π —Å—Ä–µ—â–∞–Ω–∏—è –≤—ä–≤ –≤—Å–∏—á–∫–∏ —Ñ–∞–π–ª–æ–≤–µ

–ó–∞–±–µ–ª–µ–∂–∫–∏:
- –ü–æ–¥ ‚Äú–≤—Å–∏—á–∫–∏ —Ñ–∞–π–ª–æ–≤–µ‚Äù –∏–º–∞–º–µ –ø—Ä–µ–¥–≤–∏–¥ –≤—Å–∏—á–∫–∏ –æ–±–∏–∫–Ω–æ–≤–µ–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –≤ –¥–∞–¥–µ–Ω–∞—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏
–Ω–µ–π–Ω–∏—Ç–µ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ü–æ–¥ ‚Äú–¥—É–º–∞‚Äù –∏–º–∞–º–µ –ø—Ä–µ–¥–≤–∏–¥ –Ω–µ–ø—Ä–µ–∫—ä—Å–Ω–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ—Å—Ç –æ—Ç –ª–∞—Ç–∏–Ω—Å–∫–∏ –±—É–∫–≤–∏ (a-z) - –≤—Å–∏—á–∫–∏
–æ—Å—Ç–∞–Ω–∞–ª–∏ —Å–∏–º–≤–æ–ª–∏ –Ω–µ —Å–∞ —á–∞—Å—Ç –æ—Ç –¥—É–º–∏—Ç–µ
- –ó–∞ —É–ª–µ—Å–Ω–µ–Ω–∏–µ –º–æ–∂–µ –¥–∞ –ø—Ä–∏–µ–º–µ—Ç–µ, —á–µ –≤—ä–≤ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –Ω—è–º–∞ –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏

````shell
#!/bin/bash

if [[ "${#}" -ne 1 ]]; then
  echo "The script accepts one positional argument."
  exit 1
fi 

if [[ ! -d "${1}" ]]; then
  echo "The first argument should be a dir"
  exit 1
fi 
file_count=0
temp_dir=$(mktemp -d)

while read file; do
  file_count=$(("${file_count}"+1))
  $( grep -oE '\b[a-zA-Z]+\b' "${file}" | sort | uniq -c | awk '{print $2 " " $1}' >> "${temp_dir}/word_count.txt")
  $( grep -oE '\b[a-zA-Z]+\b' "${file}" | sort | uniq -c | awk '{print $2}' >> "${temp_dir}/file_count.txt" )
done < <(find "${1}" -type f 2>/dev/null)

$(cat file_count.txt | sort | uniq -c >> "${temp_dir}/overall_count.txt" )
$(rm "${temp_dir}/file_count.txt")

limit=$(("${file_count}"/2))
if [[ "${limit}" -lt 3 ]]; then
  limit=3
fi 

$(cat "${temp_dir}/overall_count.txt" | awk -v c="${limit}" '{if ($2 >= c) {print $3}}' >> "${temp_dir}/candidates.txt")
$(rm "${temp_dir}/overall_count.txt")

while read -r word; do
  sum=$(grep "^$word" "${temp_dir}/word_count.txt" | awk -v s="${sum}"'{s += $2} END {print s}')
  $(echo "$word $sum" >> "${temp_dir}/results.txt")
done < candidates.txt

$(rm "${temp_dir}/word_count.txt")
$(rm "${temp_dir}/candidates.txt")

echo "$( cat "${temp_dir}/results.txt" | sort -k2 -nr | head -n 10 )"

$(rm "${temp_dir}/word_count.txt")
$(rmdir "${temp_dir}")

exit 0

````

### 61 2023-SE-02

–ó–∞–¥–∞—á–∞—Ç–∞ –≤–∏ –µ –¥–∞ –Ω–∞–ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç b e n c h m a r k . s h , –∫–æ–π—Ç–æ –∏–∑–º–µ—Ä–≤–∞ —Å—Ä–µ–¥–Ω–æ—Ç–æ –≤—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞
–¥–∞–¥–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞. –ü—ä—Ä–≤–∏—è—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞ –µ —á–∏—Å–ª–æ (–≤—Ä–µ–º–µ –∑–∞ –ø—Ä–æ–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –≤
—Å–µ–∫—É–Ω–¥–∏), –∞ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞ —Å–∞ –∏–∑–º–µ—Ä–≤–∞–Ω–∞—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∏ –Ω–µ–π–Ω–∏—Ç–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∏.
–°–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ, –¥–æ–∫–∞—Ç–æ –∏–∑—Ç–µ—á–µ –ø–æ–¥–∞–¥–µ–Ω–æ—Ç–æ –≤—Ä–µ–º–µ.
–ö–æ–≥–∞—Ç–æ —Ç–æ–≤–∞ —Å–µ —Å–ª—É—á–∏, —Å–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑—á–∞–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–æ—Ç–æ –∏–∑–≤–∏–∫–≤–∞–Ω–µ –Ω–∞ –∫–æ–º–∞–Ω–¥–∞—Ç–∞ –¥–∞ –ø—Ä–∏–∫–ª—é—á–∏ –∏ –¥–∞
–∏–∑–≤–µ–¥–µ —Å—ä–æ–±—â–µ–Ω–∏–µ, –æ–ø–∏—Å–≤–∞—â–æ –±—Ä–æ—è –Ω–∞–ø—Ä–∞–≤–µ–Ω–∏ –∏–∑–≤–∏–∫–≤–∞–Ω–∏—è, –æ–±—â–æ—Ç–æ –∏ —Å—Ä–µ–¥–Ω–æ—Ç–æ –≤—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ.
![img.png](img.png)
–ó–∞–±–µ–ª–µ–∂–∫–∏:
- –í—Ä–µ–º–µ–Ω–∞—Ç–∞ —Å–µ –∏–∑–≤–µ–∂–¥–∞—Ç –≤ —Å–µ–∫—É–Ω–¥–∏, —Å —Ç–æ—á–Ω–æ—Å—Ç –¥–≤–∞ –∑–Ω–∞–∫–∞ —Å–ª–µ–¥ –∑–∞–ø–µ—Ç–∞–π–∫–∞—Ç–∞.
- –ü—Ä–∏–µ–º–µ—Ç–µ, —á–µ –≤—Ä–µ–º–µ—Ç–æ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ —á–∞—Å—Ç–∏—Ç–µ –æ—Ç —Å–∫—Ä–∏–ø—Ç–∞ –∏–∑–≤—ä–Ω –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –µ –ø—Ä–µ–Ω–∞–±—Ä–µ–∂–∏–º–æ
–º–∞–ª–∫–æ


````shell
#!/bin/bash

if [ "${#}" -lt 2 ]; then
  echo "Usage: $0 <duration in seconds> <command> [arguments...]"
  exit 1
fi

duration="${1}"
shift #  literally "shifts" all the positional parameters to the left by one
command="${@}"

end_time=$(( $(date +%s) + duration )) # date +%s –∑–∞ –ø–æ–ª—É—á–∞–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–æ—Ç–æ –≤—Ä–µ–º–µ,  date +%s.%N –∑–∞ —Å–µ–∫—É–Ω–¥–∏ –∏ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥–∏
count=0
total_time=0

while [ $(date +%s) -lt $end_time ]; do
  start_time=$(date +%s.%N)
  eval "$command"
  end_time_command=$(date +%s.%N)
  
  runtime=$(echo "$end_time_command - $start_time" | bc) # bc –∑–∞ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è —Å –ø–ª–∞–≤–∞—â–∞ –∑–∞–ø–µ—Ç–∞—è
  total_time=$(echo "$total_time + $runtime" | bc)
  ((count++))
done

if [ $count -gt 0 ]; then
  average_time=$(echo "scale=2; ${total_time} / ${count}" | bc) # scale=2 tells bc to format the result to two decimal places
else
  average_time=0
fi

echo "Ran the command '${command}' ${count} times for a total of $(printf "%.2f" ${total_time}) seconds."
echo "Average runtime: ${average_time} seconds."

exit 0
````

### –ó–∞–¥. 60 2023-SE-01
 See labs/04_05_2024.md


### –ó–∞–¥. 63 2023-SE-04

–ù–∞–ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –æ—Ç–∫—Ä–∏–≤–∞ –µ–¥–Ω–∞–∫–≤–∏ –ø–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–µ –≤ –¥–∞–¥–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏ –∏–∑–ø–æ–ª–∑–≤–∞
—Ç–∞–∑–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∑–∞ –¥–∞ –Ω–∞–º–∞–ª–∏ –∑–∞–µ—Ç–æ—Ç–æ –º—è—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–∞.
–°–∫—Ä–∏–ø—Ç—ä—Ç –ø—Ä–∏–µ–º–∞ –µ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—ä—Ä ‚Äî –∏–º–µ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è. –ü—Ä–∏–º–µ—Ä–Ω–æ –∏–∑–≤–∏–∫–≤–∞–Ω–µ: . /dedup.sh ./my-dir
–°–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ –¥–≤–µ –Ω–µ—â–∞:
- –∞–∫–æ –∏–º–∞ —Ñ–∞–π–ª–æ–≤–µ —Å –µ–¥–Ω–∞–∫–≤–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ, –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ —Ç–∞–∫–∞, —á–µ –∏–º–µ–Ω–∞—Ç–∞ –Ω–∞ —Ç–µ–∑–∏ —Ñ–∞–π–ª–æ–≤–µ –¥–∞ —Å–æ—á–∞—Ç
–∫—ä–º –µ–¥–Ω–æ –∏ —Å—ä—â–æ –∫–æ–ø–∏–µ –Ω–∞ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
- –¥–∞ –∏–∑–≤–µ–¥–µ —Å—ä–æ–±—â–µ–Ω–∏–µ, —Å—ä–¥—ä—Ä–∂–∞—â–æ —Å–ª–µ–¥–Ω–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
    - –∫–æ–ª–∫–æ –≥—Ä—É–ø–∏ —Ñ–∞–π–ª–æ–≤–µ —Å–∞ –¥–µ–¥—É–ø–ª–∏–∫–∏—Ä–∞–Ω–∏
    - –∫–æ–ª–∫–æ –±–∞–π—Ç–∞ –æ—Ç –º—è—Å—Ç–æ—Ç–æ –Ω–∞ –¥–∏—Å–∫–∞ —Å–µ –µ –æ—Å–≤–æ–±–æ–¥–∏–ª–æ
–ó–∞–±–µ–ª–µ–∂–∫–∏:
- —Å—á–∏—Ç–∞–º–µ, —á–µ —Ü—è–ª–∞—Ç–∞ –¥–∞–¥–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–µ –Ω–∞–º–∏—Ä–∞ –≤—ä—Ä—Ö—É –µ–¥–Ω–∞ —Ñ–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞
- –∞–∫–æ –¥–≤–∞ —Ñ–∞–π–ª–∞ –∏–º–∞—Ç –µ–¥–Ω–∞–∫–≤–∏ —Ö–µ—à-—Å—É–º–∏, —Å—á–∏—Ç–∞–º–µ, —á–µ —Å–∞ –µ–¥–Ω–∞–∫–≤–∏ –ø–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ

````shell
#!/bin/bash

if [ "$#" -ne 1 ]; then
  echo "Usage: $0 <directory>"
  exit 1
fi

if [ ! -d "$1" ]; then
  echo "The provided argument is not a directory."
  exit 1
fi

directory="$1"
temp_file=$(mktemp)

find "$directory" -type f | while read file; do
  sha256sum "$file" >> "$temp_file"
done

sort "$temp_file" -o "$temp_file" # -o overwrite the existing content 

prev_hash=""
prev_file=""
total_saved=0
dedup_groups=0

while read hash file; do
  if [ "$hash" == "$prev_hash" ]; then
    if [ -n "$prev_file" ]; then # -n the length of the string is non-zero
      filesize=$(stat -c %s "$file")
      rm "$file" && ln "$prev_file" "$file" # remove duplicate and link it to the original
      total_saved=$((total_saved + filesize))
    fi
  else
    prev_file="$file"
    dedup_groups=$((${dedup_groups}+1))
  fi
  prev_hash="${hash}"
done < "$temp_file"

echo "Number of deduplicated groups: $dedup_groups"
echo "Total disk space saved: $total_saved bytes"

rm "$temp_file"
exit 0
````

### –ó–∞–¥. 64 2023-SE-05
–ö–∞–∑–≤–∞–º–µ, —á–µ –∫–æ–º–∞–Ω–¥–∞—Ç–∞ foo –∑–∞–µ–º–∞ –ø–∞–º–µ—Ç ùëã, –∫–æ–≥–∞—Ç–æ ùëã –µ —Å—É–º–∞—Ç–∞ –Ω–∞ –∑–∞–µ—Ç–∞—Ç–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∞ –ø–∞–º–µ—Ç (rss) –Ω–∞
–≤—Å–∏—á–∫–∏ –ø—Ä–æ—Ü–µ—Å–∏, —á–∏—è—Ç–æ –∫–æ–º–∞–Ω–¥–∞ (comm) –µ foo.
–ù–∞–ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –ø–æ–≥–ª–µ–∂–¥–∞ –ø—Ä–æ—Ü–µ—Å–∏—Ç–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –ø—Ä–µ–∑ –µ–¥–Ω–∞ —Å–µ–∫—É–Ω–¥–∞, –¥–æ–∫–∞—Ç–æ —Å–ø—Ä–∞—Ç –¥–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç
–∫–æ–º–∞–Ω–¥–∏, —á–∏—è—Ç–æ –∑–∞–µ—Ç–∞ –ø–∞–º–µ—Ç –µ –Ω–∞–¥ 65536.
–°–ª–µ–¥ —Ç–æ–≤–∞, —Å–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–≤–µ–¥–µ –≤—Å–∏—á–∫–∏ –∫–æ–º–∞–Ω–¥–∏, –∫–æ–∏—Ç–æ —Å–∞ –∑–∞–µ–º–∞–ª–∏ –ø–∞–º–µ—Ç –Ω–∞–¥ 65536 –≤ –ø–æ–Ω–µ –ø–æ–ª–æ–≤–∏–Ω–∞—Ç–∞
‚Äú–ø–æ–≥–ª–µ–∂–¥–∞–Ω–∏—è‚Äù

````shell
````


### –ó–∞–¥. 65 2023-SE-06
–ù–∞–ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –∫–æ–ø–∏—Ä–∞ —Å–Ω–∏–º–∫–∏ –æ—Ç –¥–∞–¥–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–∫–æ—è—Ç–æ —â–µ –Ω–∞—Ä–∏—á–∞–º–µ —Ñ–æ—Ç–æ–∞–ø–∞—Ä–∞—Ç–∞) –≤
–Ω–æ–≤–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–∫–æ—è—Ç–æ —â–µ –Ω–∞—Ä–∏—á–∞–º–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ç–∞), —Å–ø–∞–∑–≤–∞–π–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.
–°–∫—Ä–∏–ø—Ç—ä—Ç –ø—Ä–∏–µ–º–∞ –ø—ä—Ç–∏—â–∞—Ç–∞ –Ω–∞ –¥–≤–µ—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∫–∞—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∏, –æ—á–∞–∫–≤–∞–π–∫–∏, —á–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ç–∞ –Ω–µ
—Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —è —Å—ä–∑–¥–∞–¥–µ.
–°–Ω–∏–º–∫–∏—Ç–µ —Å–∞ –≤—Å–∏—á–∫–∏ —Ñ–∞–π–ª–æ–≤–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ —Ñ–æ—Ç–æ–∞–ø–∞—Ä–∞—Ç–∞ –∏ –Ω–µ–π–Ω–∏—Ç–µ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —á–∏–∏—Ç–æ
–∏–º–µ–Ω–∞ –∑–∞–≤—ä—Ä—à–≤–∞—Ç –Ω–∞ .jpg. –ü–æ–¥ –¥–∞—Ç–∞ –Ω–∞ —Å–Ω–∏–º–∫–∞ —â–µ –∏–º–∞–º–µ –ø—Ä–µ–¥–≤–∏–¥ –Ω–µ–π–Ω–æ—Ç–æ –≤—Ä–µ–º–µ –Ω–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è
(mtime).
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Å—ä—Å—Ç–æ–∏ –æ—Ç –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –∏–º–µ–Ω–∞ –æ—Ç –≤–∏–¥–∞ 2023-04-20_2023-04-23, –æ–∑–Ω–∞—á–∞–≤–∞—â–∏
–∑–∞—Ç–≤–æ—Ä–µ–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –æ—Ç –¥–Ω–∏. –°–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ —Ç–∞–∫–∏–≤–∞ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –¥–∞ —Ä–∞–∑–ø–æ–ª–æ–∂–∏
—Å–Ω–∏–º–∫–∏—Ç–µ –≤ —Ç—è—Ö, —Ç–∞–∫–∞ —á–µ –¥–∞ —Å–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏ —Å–ª–µ–¥–Ω–∏—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞:
1. –í—Å—è–∫–∞ —Å–Ω–∏–º–∫–∞ —Å–µ –Ω–∞–º–∏—Ä–∞ –≤ —Ç–∞–∫–∞–≤–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, —á–µ –¥–∞—Ç–∞—Ç–∞ –Ω–∞ —Å–Ω–∏–º–∫–∞—Ç–∞ –¥–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏ –Ω–∞ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è
   –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç –¥–Ω–∏
2. –ó–∞ –≤—Å–µ–∫–∏ –¥–µ–Ω –æ—Ç –≤—Å–µ–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –ø–æ–Ω–µ –µ–¥–Ω–∞ —Å–Ω–∏–º–∫–∞ –æ—Ç —Ç–æ–∑–∏ –¥–µ–Ω –≤ —Ç–æ–∑–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª
3. –ù—è–º–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∏ —Å–µ –∏ –¥–æ–ª–µ–ø–µ–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ (–º–µ–∂–¥—É –≤—Å–µ–∫–∏ –¥–≤–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∏–º–∞ –ø–æ–Ω–µ
   –µ–¥–∏–Ω –¥–µ–Ω –±–µ–∑ —Å–Ω–∏–º–∫–∞)
   –û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—Ç–µ –∏–º–µ–Ω–∞ –Ω–∞ —Å–Ω–∏–º–∫–∏—Ç–µ –Ω–µ –Ω–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É–≤–∞—Ç: —Å–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º –¥–∞–¥–µ –Ω–æ–≤–∏ –∏–º–µ–Ω–∞, –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏
   —Ç–µ—Ö–Ω–∏—è mtime, —Å —Ñ–æ—Ä–º–∞—Ç, –∏–∑–≥–ª–µ–∂–¥–∞—â —Ç–∞–∫–∞:
  ![img_1.png](img_1.png)

   –ë–æ–Ω—É—Å –∑–∞ –æ—â–µ –Ω—è–∫–æ–ª–∫–æ —Ç–æ—á–∫–∏: –Ω–∞–ø—Ä–∞–≤–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç–∞ —Ç–∞–∫–∞, —á–µ –¥–∞ –º–æ–∂–µ –¥–∞ —Ä–∞–±–æ—Ç–∏ –ø—Ä–∏ –≤–µ—á–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∞
   –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –¥–æ–±–∞–≤—è–π–∫–∏ —Å–Ω–∏–º–∫–∏—Ç–µ –æ—Ç —Ñ–æ—Ç–æ–∞–ø–∞—Ä–∞—Ç–∞ –∫—ä–º –Ω–µ—è –∏ –∑–∞–ø–∞–∑–≤–∞–π–∫–∏ –≤—Å–∏—á–∫–∏ 

````shell
#!/bin/bash
if [ "$#" -ne 2 ]; then
  echo "Usage: $0 <source directory> <target directory>"
  exit 1
fi

source_dir=$1
target_dir=$2

mkdir -p "$target_dir"

find "${source_dir}" -type f -iname '*.jpg' | while read file; do
  mod_date=$(date -r "$file" '+%Y-%m-%d')
  mod_time=$(date -r "$file" '+%H:%M:%S')
  year=$(echo "$mod_date" | cut -d '-' -f1)
  month=$(echo "$mod_date" | cut -d '-' -f2)
  day=$(echo "$mod_date" | cut -d '-' -f3)

  date_dir="${year}-${month}-${day}"

  mkdir -p "$target_dir/$date_dir"

  new_filename="${mod_date}_${mod_time}.jpg"

  cp "$file" "$target_dir/$date_dir/$new_filename"
done

exit 0
````


### –ó–∞–¥. 54 2021-SE-01
–†–∞–∑–ø–æ–ª–∞–≥–∞—Ç–µ —Å –º–∞—à–∏–Ω–∞, –Ω–∞ –∫–æ—è—Ç–æ –µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω —Å–æ—Ñ—Ç—É–µ—Ä, –∫–æ–π—Ç–æ –ø–æ–ª–∑–≤–∞ –¥–≤–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏
–∞–∫–∞—É–Ω—Ç–∞ ‚Äì oracle –∏ grid . –í—Å–µ–∫–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –±–∏ —Ç—Ä—è–±–≤–∞–ª–æ –¥–∞ –∏–º–∞ environment –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ ORACLE_HOME,
–∫–æ—è—Ç–æ —É–∫–∞–∑–≤–∞ –∞–±—Å–æ–ª—é—Ç–µ–Ω –ø—ä—Ç –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç /path/to/dir. –í –ø–æ–¥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è bin –Ω–∞ –∑–∞–¥–∞–¥–µ–Ω–∞—Ç–∞
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±–∏ —Ç—Ä—è–±–≤–∞–ª–æ –¥–∞ –∏–º–∞ –∏–∑–ø—ä–ª–Ω–∏–º —Ñ–∞–π–ª —Å –∏–º–µ adrci . –í—Å–µ–∫–∏ –æ—Ç –¥–≤–∞—Ç–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –∏–º–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–∞
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è diag_dest, –∫–æ—è—Ç–æ –µ –≤—ä–≤ –≤–∏–¥–∞ /u01/app/–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª. –ö–æ–≥–∞—Ç–æ –Ω—è–∫–æ–π –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –∏–∑–ø—ä–ª–Ω–∏
–Ω–µ–≥–æ–≤–æ—Ç–æ –∫–æ–ø–∏–µ –Ω–∞ –∫–æ–º–∞–Ω–¥–∞—Ç–∞ adrci —Å –ø–∞—Ä–∞–º–µ—Ç—ä—Ä exec="show homes" –º–æ–∂–µ –¥–∞ –ø–æ–ª—É—á–∏ –Ω–∞ STDOUT –µ–¥–∏–Ω
–æ—Ç —Å–ª–µ–¥–Ω–∏—Ç–µ –¥–≤–∞ –∏–∑—Ö–æ–¥–∞:
- –≤–∞—Ä–∏–∞–Ω—Ç 1: (–Ω–µ—É—Å–ø–µ—Ö): No ADR homes are set
- –≤–∞—Ä–∏–∞–Ω—Ç 2: (—É—Å–ø–µ—Ö):

![img_2.png](img_2.png)

–ò –≤ –¥–≤–∞—Ç–∞ —Å–ª—É—á–∞—è –∫–æ–º–∞–Ω–¥–∞—Ç–∞ –ø—Ä–∏–∫–ª—é—á–≤–∞ —Å exit code 0 . –ê–∫–æ –∫–æ–º–∞–Ω–¥–∞—Ç–∞ —Å–µ –∏–∑–ø—ä–ª–Ω–∏ —É—Å–ø–µ—à–Ω–æ, —Ç—è –≤—Ä—ä—â–∞
—Å–ø–∏—Å—ä–∫ —Å –µ–¥–∏–Ω –∏–ª–∏ –ø–æ–≤–µ—á–µ ADR Homes, –∫–æ–∏—Ç–æ —Å–∞ —Ä–µ–ª–∞—Ç–∏–≤–Ω–∏ –∏–º–µ–Ω–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–ø—Ä—è–º–æ diag_dest –Ω–∞
—Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª.
–ù–∞–ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –º–æ–∂–µ –¥–∞ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Å–∞–º–æ –æ—Ç –Ω—è–∫–æ–π –æ—Ç —Ç–µ–∑–∏ –¥–≤–∞ –∞–∫–∞—É–Ω—Ç–∞, –∏ –∏–∑–≤–µ–∂–¥–∞ –Ω–∞ STDOUT —Ä–∞–∑–º–µ—Ä–∞ –≤ –º–µ–≥–∞–±–∞–π—Ç–∏ –∏ –∞–±—Å–æ–ª—é—Ç–Ω–∏—è—Ç –ø—ä—Ç –Ω–∞ –≤—Å–µ–∫–∏ ADR Home.

- –ü—Ä–∏–º–µ—Ä–µ–Ω –∏–∑—Ö–æ–¥:

![img_3.png](img_3.png)

````shell
#!/bin/bash

# the solution will work only for oracle

if [[ "$(whoami)" != "oracle" ]]; then
  echo "This script must be run by 'oracle' user."
  exit 1
fi

ORACLE_HOME=$(echo $ORACLE_HOME)
diag_dest="/u01/app/$(whoami)"

output=$(ORACLE_HOME/bin/adrci exec="show homes")

if [[ $output =~ "No ADR homes are set" ]]; then
  echo "No ADR homes are set"
  exit 0
fi

echo "$output" | grep -v 'ADR Homes' | while read -r line; do # -r prevent treating a backslash (\) as an escape char
  full_path="$diag_dest/$line"
  size_mb=$(du -sm "$full_path" | cut -f1) # -s summarize, -m megabytes
  echo "$size_mb $full_path"
done

exit 0
````

### –ó–∞–¥. 46 2021-SE-03 

–ù–∞–ø–∏—à–µ—Ç–µ shell —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –ø—Ä–∏–µ–º–∞ –¥–≤–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä–∞ ‚Äì –∏–º–µ–Ω–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ.
–ü—Ä–∏–º–µ—Ä–Ω–æ –∏–∑–≤–∏–∫–≤–∞–Ω–µ:

$ ./foo.sh input.bin output.h

–§–∞–π–ª—ä—Ç input.bin –µ –¥–≤–æ–∏—á–µ–Ω —Ñ–∞–π–ª —Å –µ–ª–µ–º–µ–Ω—Ç–∏ uint16_t —á–∏—Å–ª–∞, —Å—ä–∑–¥–∞–¥–µ–Ω –Ω–∞ little-endian –º–∞—à–∏–Ω–∞.
–í–∞—à–∏—è—Ç —Å–∫—Ä–∏–ø—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞ C —Ö–µ–¥—ä—Ä —Ñ–∞–π–ª, –¥–µ—Ñ–∏–Ω–∏—Ä–∞—â –º–∞—Å–∏–≤ —Å –∏–º–µ arr, –∫–æ–π—Ç–æ:
- —Å—ä–¥—ä—Ä–∂–∞ –≤—Å–∏—á–∫–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –æ—Ç –≤—Ö–æ–¥–Ω–∏—è —Ñ–∞–π–ª;
- –Ω—è–º–∞ —É–∫–∞–∑–∞–Ω–∞ –≥–æ–ª–µ–º–∏–Ω–∞;
- –Ω–µ –ø–æ–∑–≤–æ–ª—è–≤–∞ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ.
–ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—è—Ç —Ö–µ–¥—ä—Ä —Ñ–∞–π–ª —Ç—Ä—è–±–≤–∞ –¥–∞:
- —Å—ä–¥—ä—Ä–∂–∞ –∏ uint32_t –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ arrN, –∫–æ—è—Ç–æ —É–∫–∞–∑–≤–∞ –≥–æ–ª–µ–º–∏–Ω–∞—Ç–∞ –Ω–∞ –º–∞—Å–∏–≤–∞;
- –±—ä–¥–µ –≤–∞–ª–∏–¥–µ–Ω –∏ –¥–∞ –º–æ–∂–µ –¥–∞ —Å–µ #include-–≤–∞ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º–∏ –æ—Ç C —Ñ–∞–π–ª–æ–≤–µ, –æ—á–∞–∫–≤–∞—â–∏ –¥–∞ ‚Äú–≤–∏–∂–¥–∞—Ç‚Äù
arr –∏ arrN.

–ó–∞ –¥–∞ –µ –≤–∞–ª–∏–¥–µ–Ω –µ–¥–∏–Ω –≤—Ö–æ–¥–µ–Ω —Ñ–∞–π–ª, —Ç–æ–π —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞ –Ω–µ –ø–æ–≤–µ—á–µ –æ—Ç 524288 –µ–ª–µ–º–µ–Ω—Ç–∞.
–ó–∞ —Å–ø—Ä–∞–≤–∫–∞, dump –Ω–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ–Ω input.bin:
00000000: 5555 5655 5955 5a55 6555 6655 6955 6a55 UUVUYUZUeUfUiUjU
00000010: 9555 9655 9955 9a55 a555 a655 a955 aa55 .U.U.U.U.U.U.U.U

````shell
#!/bin/bash

if [ $# -ne 2 ]; then
    echo "Usage: $0 input.bin output.h"
    exit 1
fi

input_file=$1
output_file=$2

if [ $(stat -c %s "$input_file") -gt $((524288 * 2)) ]; then # 524288 * 2 bites
    echo "Error: input file is too large."
    exit 1
fi

# Use xxd to dump the binary data in plain hexadecimal format, with 2 bytes per chunk.
numbers= xxd -p -c 2 example-soa | awk '{print "0x"$1","}'
num_elements=$(echo "$numbers" | wc -l)


echo "const uint16_t arr[${num_elements}] = {" > "$output_file"
echo "$numbers" >> "$output_file"
echo "};" >> "$output_file"

exit 0
````

### –ó–∞–¥. 45 2021-SE-02

–ï–¥–∏–Ω –æ—Ç —á–µ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏—Ç–µ DNS —Å—ä—Ä–≤—ä—Ä–∏ –µ BIND9, –ø—Ä–∏ –∫–æ–π—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ—Ç–æ –Ω–∞ DNS –∑–æ–Ω–∏—Ç–µ –æ–±–∏–∫–Ω–æ–≤–µ–Ω–Ω–æ
—Å—Ç–æ–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤–∏ —Ñ–∞–π–ª–æ–≤–µ, –Ω–∞—Ä–∏—á–∞–Ω–∏ –∑–æ–Ω–∞–ª–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ. –ó–∞ —É–ª–µ—Å–Ω–µ–Ω–∏–µ, –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞, —â–µ –ø–æ–ª–∑–≤–∞–º–µ
–æ–ø—Ä–æ—Å—Ç–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–æ–Ω–∞–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ.
–ü–æ–¥ whitespace —Ä–∞–∑–±–∏—Ä–∞–º–µ –ø—Ä–æ–∏–∑–≤–æ–ª–Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç —Ç–∞–±–æ–≤–µ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏.
–ü–æ–¥ FQDN —Ä–∞–∑–±–∏—Ä–∞–º–µ –Ω–∏–∑, –∫–æ–π—Ç–æ –∏–º–∞ –¥–æ–ø—É—Å—Ç–∏–º–∏ —Å–∏–º–≤–æ–ª–∏ –º–∞–ª–∫–∏ –ª–∞—Ç–∏–Ω—Å–∫–∏ –±—É–∫–≤–∏, —Ü–∏—Ñ—Ä–∏ –∏ —Ç–æ—á–∫–∞; –Ω–µ
–º–æ–∂–µ –¥–∞ –∑–∞–ø–æ—á–≤–∞ —Å —Ç–æ—á–∫–∞, –Ω–µ –º–æ–∂–µ –¥–∞ –∏–º–∞ –¥–≤–µ –∏–ª–∏ –ø–æ–≤–µ—á–µ —Å—ä—Å–µ–¥–Ω–∏ —Ç–æ—á–∫–∏, –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –∑–∞–≤—ä—Ä—à–≤–∞ —Å
—Ç–æ—á–∫–∞.

–ó–æ–Ω–∞–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ —Å—ä–¥—ä—Ä–∂–∞—Ç —Ä–µ—Å—É—Ä—Å–Ω–∏ –∑–∞–ø–∏—Å–∏, –ø–æ –µ–¥–∏–Ω –Ω–∞ —Ä–µ–¥. –û–±—â–∏—è—Ç –≤–∏–¥ –Ω–∞ –¥–∞–¥–µ–Ω —Ä–µ—Å—É—Ä—Å–µ–Ω –∑–∞–ø–∏—Å e
<–∫–ª—é—á> <TTL> <–∫–ª–∞—Å> <—Ç–∏–ø> <RDATA>, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ —Å whitespace, –Ω–∞–ø—Ä–∏–º–µ—Ä:

astero.openfmi.net. 3600 IN A 185.117.82.99

–ö—ä–¥–µ—Ç–æ:
- –∫–ª—é—á (astero.openfmi.net.) ‚Äì FQDN
- TTL (3600) ‚Äì —Ü–∏—Ñ—Ä–∏; –ø–æ–ª–µ—Ç–æ –º–æ–∂–µ –¥–∞ –ª–∏–ø—Å–≤–∞
- –∫–ª–∞—Å (IN) - –≥–ª–∞–≤–Ω–∏ –ª–∞—Ç–∏–Ω—Å–∫–∏ –±—É–∫–≤–∏; –∫–ª–∞—Å—ä—Ç –≤–∏–Ω–∞–≥–∏ –µ IN
- —Ç–∏–ø (A) - –≥–ª–∞–≤–Ω–∏ –ª–∞—Ç–∏–Ω—Å–∫–∏ –±—É–∫–≤–∏; –Ω—è–∫–æ–µ –æ—Ç SOA, NS, A, AAAA
- RDATA (185.117.82.99) - –¥–∞–Ω–Ω–∏ –Ω–∞ –∑–∞–ø–∏—Å–∞; —Ä–∞–∑–ª–∏—á–Ω–∏ –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏—Ç–µ —Ç–∏–ø–æ–≤–µ —Ä–µ—Å—É—Ä—Å–Ω–∏ –∑–∞–ø–∏—Å–∏;
–≤—Å–∏—á–∫–æ —Å–ª–µ–¥ —Ç–∏–ø–∞ –¥–æ –∫—Ä–∞—è –Ω–∞ —Ä–µ–¥–∞.

–ó–Ω–∞–∫—ä—Ç —Ç–æ—á–∫–∞-–∏-–∑–∞–ø–µ—Ç–∞—è ; –µ –∑–Ω–∞–∫ –∑–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä, –∏ –≤—Å–∏—á–∫–æ —Å–ª–µ–¥ –Ω–µ–≥–æ –¥–æ –∫—Ä–∞—è –Ω–∞ —Ä–µ–¥–∞ —Å–µ –∏–≥–Ω–æ—Ä–∏—Ä–∞.
–í—ä–≤ –≤—Å–µ–∫–∏ –∑–æ–Ω–∞–ª–µ–Ω —Ñ–∞–π–ª —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ —Ç–æ—á–Ω–æ –µ–¥–∏–Ω SOA –∑–∞–ø–∏—Å, –∏ —Ç–æ–π —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –ø—ä—Ä–≤–∏—è—Ç –∑–∞–ø–∏—Å –≤—ä–≤
—Ñ–∞–π–ª–∞. –ü—Ä–∏–º–µ—Ä –∑–∞ –µ–¥–Ω–æ—Ä–µ–¥–æ–≤ SOA –∑–∞–ø–∏—Å:

astero.openfmi.net. 3600 IN SOA nimbus.fccf.net .root.fccf.net. 2021041901 86400 7200 3024000 3600
    
RDATA-—Ç–∞ –Ω–∞ SOA –∑–∞–ø–∏—Å —Å–µ —Å—ä—Å—Ç–æ–∏ –æ—Ç –¥–≤–∞ FQDN-–∞ –∏ –ø–µ—Ç —á–∏—Å–ª–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ —Å whitespace.
–í—ä–ø—Ä–µ–∫–∏, —á–µ –≥–æ—Ä–Ω–æ—Ç–æ –µ –≤–∞–ª–∏–¥–µ–Ω SOA –∑–∞–ø–∏—Å, –∑–∞ –ø—Ä–µ–≥–ª–µ–¥–Ω–æ—Å—Ç –≤ –∑–æ–Ω–∞–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ —á–µ—Å—Ç–æ —Å–µ –ø–æ–ª–∑–≤–∞ —Å–ª–µ–¥–Ω–∏—è—Ç
—Å–∏–Ω—Ç–∞–∫—Å–∏—Å (–º–Ω–æ–≥–æ—Ä–µ–¥–æ–≤ SOA –∑–∞–ø–∏—Å, –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω –Ω–∞ –≥–æ—Ä–Ω–∏—è):

astero.openfmi.net. 3600 IN SOA nimbus.fccf.net .root.fccf.net. (
                                2021041901 ; serial
                                86400      ; refresh
                                7200       ; retry
                                3024000    ; expire
                                3600       ; negative TTL
                                )

—Ç.–µ., –ø–æ—Ä–µ–¥–∏—Ü–∞—Ç–∞ –æ—Ç —á–∏—Å–ª–∞ —Å–µ —Ä–∞–∑–±–∏–≤–∞ –Ω–∞ –Ω—è–∫–æ–ª–∫–æ —Ä–µ–¥–∞, –æ–≥—Ä–∞–¥–µ–Ω–∏ –≤ –æ–±–∏–∫–Ω–æ–≤–µ–Ω–Ω–∏ —Å–∫–æ–±–∏, –∏ –∑–∞ –≤—Å—è–∫–æ —á–∏—Å–ª–æ
—Å–µ —Å–ª–∞–≥–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä –∫–∞–∫–≤–æ –æ–∑–Ω–∞—á–∞–≤–∞.
–ü—ä—Ä–≤–æ—Ç–æ –æ—Ç —Ç–µ–∑–∏ —á–∏—Å–ª–∞ (
) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ —Å–µ—Ä–∏–π–Ω–∏—è—Ç –Ω–æ–º–µ—Ä –Ω–∞ –∑–æ–Ω–∞—Ç–∞, –∫–æ–π—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —É–≤–µ–ª–∏—á–∞–≤–∞
–≤—Å–µ–∫–∏ –ø—ä—Ç, –∫–æ–≥–∞—Ç–æ –Ω–µ—â–æ –≤ –∑–æ–Ω–∞–ª–Ω–∏—è—Ç —Ñ–∞–π–ª —Å–µ –ø—Ä–æ–º–µ–Ω–∏. –ò–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –≤–∞–∂–Ω–æ –µ —Ç–æ–≤–∞ —á–∏—Å–ª–æ —Å–∞–º–æ –¥–∞
–Ω–∞—Ä–∞—Å—Ç–≤–∞, –∏ –Ω–∏–∫–æ–≥–∞ –¥–∞ –Ω–µ –Ω–∞–º–∞–ª—è–≤–∞.
–ï–¥–∏–Ω –æ—Ç —á–µ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç–∏ –∑–∞ —Å–µ—Ä–∏–µ–Ω –Ω–æ–º–µ—Ä, –∫–æ–π—Ç–æ –ø–æ–∫–∞–∑–≤–∞ –∫–æ–≥–∞ –µ –Ω–∞—Å—Ç—ä–ø–∏–ª–∞ –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞
–ø—Ä–æ–º—è–Ω–∞ –≤ –∑–æ–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ —á–∏—Å–ª–æ –≤—ä–≤ –≤–∏–¥–∞ YYYYMMDDTT, —Ç.–µ., —á–µ—Ç–∏—Ä–∏ —Ü–∏—Ñ—Ä–∏ –∑–∞ –≥–æ–¥–∏–Ω–∞,
–¥–≤–µ —Ü–∏—Ñ—Ä–∏ –∑–∞ –º–µ—Å–µ—Ü, –¥–≤–µ —Ü–∏—Ñ—Ä–∏ –∑–∞ –¥–∞—Ç–∞ –∏ –æ—â–µ –¥–≤–µ —Ü–∏—Ñ—Ä–∏ –∑–∞ –ø–æ—Ä–µ–¥–Ω–∞ –ø—Ä–æ–º—è–Ω–∞ –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è
–¥–µ–Ω. –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ –¥–≤–µ —Ü–∏—Ñ—Ä–∏ (–¢–¢) –∏–º–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–∞ —Å–∞ –æ—Ç 00 –¥–æ 99 (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–æ, —Ç–∞–∫–∞ –Ω–µ –º–æ–∂–µ –¥–∞ –∏–º–∞
–ø–æ–≤–µ—á–µ –æ—Ç 100 –ø—Ä–æ–º–µ–Ω–∏ –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –µ–¥–∏–Ω –¥–µ–Ω).
–ó–∞ —É–¥–æ–±—Å—Ç–≤–æ –ø—Ä–∏–µ–º–∞–º–µ, —á–µ –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω —Å–µ—Ä–∏–µ–Ω –Ω–æ–º–µ—Ä (—Ç–æ—á–Ω–∞—Ç–∞ –ø–æ—Ä–µ–¥–∏—Ü–∞ —Ü–∏—Ñ—Ä–∏) —Å–µ —Å—Ä–µ—â–∞ —Å–∞–º–æ –Ω–∞ –µ–¥–Ω–æ
–º—è—Å—Ç–æ –≤ –∑–æ–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª.
–ù–∞–ø–∏—à–µ—Ç–µ —à–µ–ª —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –ø–æ –ø–æ–¥–∞–¥–µ–Ω–∏ –∏–º–µ–Ω–∞ –Ω–∞ –∑–æ–Ω–∞–ª–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –ø—Ä–æ–º–µ–Ω—è —Å–µ—Ä–∏–π–Ω–∏—è—Ç –Ω–æ–º–µ—Ä –≤
SOA –∑–∞–ø–∏—Å–∞ –Ω–∞ –≤—Å–µ–∫–∏ —Ñ–∞–π–ª –ø–æ —Å–ª–µ–¥–Ω–∏—è—Ç –∞–ª–≥–æ—Ä–∏—Ç—ä–º:
- –∞–∫–æ –¥–∞—Ç–∞—Ç–∞ –≤ —Å–µ—Ä–∏–π–Ω–∏—è—Ç –Ω–æ–º–µ—Ä –µ –ø–æ-—Å—Ç–∞—Ä–∞ –æ—Ç –¥–Ω–µ—à–Ω–∞—Ç–∞, –Ω–æ–≤–∏—è—Ç —Å–µ—Ä–∏–µ–Ω –Ω–æ–º–µ—Ä —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –æ—Ç –≤–∏–¥–∞
–¥–Ω–µ—à–Ω–∞–¥–∞—Ç–∞00
- –∞–∫–æ –¥–∞—Ç–∞—Ç–∞ –≤ —Å–µ—Ä–∏–π–Ω–∏—è—Ç –Ω–æ–º–µ—Ä –µ —Ä–∞–≤–Ω–∞ –Ω–∞ –¥–Ω–µ—à–Ω–∞—Ç–∞, —Å–µ—Ä–∏–π–Ω–∏—è—Ç –Ω–æ–º–µ—Ä —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —É–≤–µ–ª–∏—á–∏ —Å
–µ–¥–∏–Ω–∏—Ü–∞

–í–∞–∂–∞—Ç —Å–ª–µ–¥–Ω–∏—Ç–µ —É—Å–ª–æ–≤–∏—è:
- —Å–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –º–æ–∂–µ –¥–∞ –æ–±—Ä–∞–±–æ—Ç–≤–∞ –∏ –µ–¥–Ω–æ—Ä–µ–¥–æ–≤–∏, –∏ –º–Ω–æ–≥–æ—Ä–µ–¥–æ–≤–∏ SOA –∑–∞–ø–∏—Å–∏
- –∑–∞ –≤—Å–µ–∫–∏ –∑–æ–Ω–∞–ª–µ–Ω —Ñ–∞–π–ª, –∫–æ–π—Ç–æ –Ω–µ –µ —É—Å–ø—è–ª –¥–∞ –æ–±—Ä–∞–±–æ—Ç–∏, —Å–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∞–¥–∏ —Å—ä–æ–±—â–µ–Ω–∏–µ –∑–∞
  –≥—Ä–µ—à–∫–∞, –∫–æ–µ—Ç–æ –≤–∫–ª—é—á–≤–∞ –∏ –∏–º–µ—Ç–æ –Ω–∞ –∑–æ–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª. –°—ä–æ–±—â–µ–Ω–∏—è—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∞ –ª–µ—Å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–≤–∞–µ–º–∏
  —Å –ø–æ–∑–Ω–∞—Ç–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Ç–µ–∫—Å—Ç

````shell
#!/bin/bash

if [[ $# -eq 0 ]]; then
   echo "Usage: $0 zonefile1 [zonefile2 ...]"
   exit 1
fi

today=$(date +%Y%m%d) 

for file in "$@"; do
    if [[ ! -f "$file" ]];then
      echo "ERROR: File $file not found."
      continue
    fi
      
     current_serial=$(grep "; serial" ${file} | awk -F" " '{print $1}' && cat ${file} | grep -v "(\|;\|)" | awk -F" " '{print $7}')

    if [[ -z "$current_serial" ]]; then
        echo "ERROR: No valid SOA serial number found in $file."
        continue
    fi

    current_date=${current_serial:0:8} # ${variable:start:length} -> extract a substring from $variable.
    revision=${current_serial:8:2}  

    if [ "$current_date" -lt "$today" ]; then
        new_serial="${today}00"
    elif [ "$current_date" -eq "$today" ]; then
        new_revision=$(printf "%02d" $((10#$revision + 1))) # %02 to pad with 0 ;#10 interpret as decimal -> by default bash works with octal
        new_serial="${today}${new_revision}"
    else
        echo "ERROR: SOA serial date is in the future in $file."
        continue
    fi

    sed -i "s/$current_serial/$new_serial/" "$file"
    echo "INFO: Updated SOA serial number in $file to $new_serial."
done

````
### 2022-SE-01

 –°—ä–≤—Ä–µ–º–µ–Ω–Ω–∏—Ç–µ –∫–æ–º–ø—é—Ç—Ä–∏ –º–æ–≥–∞—Ç –¥–∞ –≤–ª–∏–∑–∞—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω–∏ —Ä–µ–∂–∏–º–∏ –∑–∞ –µ–Ω–µ—Ä–≥–æ—Å–ø–µ—Å—Ç—è–≤–∞–Ω–µ (suspend) –∏ –∏–∑–ª–∏–∑–∞—Ç –æ—Ç —Ç–æ–∑–∏ —Ä–µ–∂–∏–º (wake-up) –ø—Ä–∏ –Ω–∞—Å—Ç—ä–ø–≤–∞–Ω–µ—Ç–æ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ —Å—ä–±–∏—Ç–∏—è. Linux kernel –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è
—Å–ø–µ—Ü–∏–∞–ª–µ–Ω –≤–∏—Ä—Ç—É–∞–ª–µ–Ω —Ñ–∞–π–ª /proc/acpi/wakeup, —á—Ä–µ–∑ –∫–æ–π—Ç–æ –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –∏–ª–∏ –ø—Ä–æ–º–µ–Ω—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ç–∞
–∑–∞ ‚Äú—Å—ä–±—É–∂–¥–∞–Ω–µ‚Äù –ø—Ä–∏ –Ω–∞—Å—Ç—ä–ø–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ —Å—ä–±–∏—Ç–∏—è, –≤ –æ–±—â–∏—è —Å–ª—É—á–∞–π - –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –Ω–∞ –Ω—è–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.
–¢—ä–π –∫–∞—Ç–æ —Ç–æ–∑–∏ —Ñ–∞–π–ª –µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫—ä–º —è–¥—Ä–æ—Ç–æ, ‚Äú—á–µ—Ç–µ–Ω–µ—Ç–æ‚Äù –æ—Ç —Ñ–∞–π–ª–∞ –∏ ‚Äú–ø–∏—Å–∞–Ω–µ—Ç–æ‚Äù –≤—ä–≤ —Ñ–∞–π–ª–∞ –∏–∑–≥–ª–µ–∂–¥–∞—Ç
—Ä–∞–∑–ª–∏—á–Ω–æ.
–ó–∞ —É–ª–µ—Å–Ω–µ–Ω–∏–µ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞ —â–µ –ø–æ–ª–∑–≤–∞–º–µ –æ–ø—Ä–æ—Å—Ç–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ç–æ–∑–∏ —Ñ–∞–π–ª.
–ü–æ–¥ whitespace —Ä–∞–∑–±–∏—Ä–∞–º–µ –ø—Ä–æ–∏–∑–≤–æ–ª–Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç —Ç–∞–±–æ–≤–µ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏. –ü—Ä–∏ —á–µ—Ç–µ–Ω–µ –æ—Ç —Ñ–∞–π–ª–∞ –∏–∑—Ö–æ–¥—ä—Ç
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ —á–µ—Ç–∏—Ä–∏ –∫–æ–ª–æ–Ω–∏, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ —Å whitespace, –≤ –ø–æ–ª–µ—Ç–∞—Ç–∞ –Ω–µ –º–æ–∂–µ –¥–∞ –∏–º–∞ whitespace; –ø—ä—Ä–≤–∏—è—Ç
—Ä–µ–¥ –µ header –Ω–∞ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞. –ü—Ä–∏–º–µ—Ä–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ —Ñ–∞–π–ª–∞:
````text
Device S-state Status       Sysfs n ode
GLAN   S4      *enabled     pci:0000:00:1f.6
XHC    S3      *enabled     pci:0000:00:14.0
XDCI   S4      *disabled
LID    S4      *enabled     platform:PNP0C0D:00
HDAS   S4      *disabled    pci:0000:00:1f.3
RP01   S4      *enabled     pci:0000:00:1c.0
````
–∫—ä–¥–µ—Ç–æ:
- –ø—ä—Ä–≤–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞ –¥–∞–≤–∞ —É–Ω–∏–∫–∞–ª–Ω–æ –∏–º–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫–æ–µ—Ç–æ –º–æ–∂–µ –¥–∞ —Å—ä–±—É–¥–∏ –º–∞—à–∏–Ω–∞—Ç–∞, –∫–∞—Ç–æ –∏–º–µ—Ç–æ
–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –¥–æ —á–µ—Ç–∏—Ä–∏ –∑–Ω–∞–∫–∞ –≥–ª–∞–≤–Ω–∏ –ª–∞—Ç–∏–Ω—Å–∫–∏ –±—É–∫–≤–∏ –∏ —Ü–∏—Ñ—Ä–∏;
- —Ç—Ä–µ—Ç–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞ –æ–ø–∏—Å–≤–∞ –¥–∞–ª–∏ —Ç–æ–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–∂–µ –¥–∞ —Å—ä–±—É–¥–∏ –º–∞—à–∏–Ω–∞—Ç–∞. –í—ä–∑–º–æ–∂–Ω–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
—Å–∞ enabled/disabled, –ø—Ä–µ–¥—Ö–æ–∂–¥–∞–Ω–∏ –æ—Ç –∑–≤–µ–∑–¥–∏—á–∫–∞;
- –≤—Ç–æ—Ä–∞—Ç–∞ –∏ —á–µ—Ç–≤—ä—Ä—Ç–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞ –≥–∏ –∏–≥–Ω–æ—Ä–∏—Ä–∞–º–µ –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞.

–ü—Ä–∏ –∑–∞–ø–∏—Å–≤–∞–Ω–µ –Ω–∞ –∏–º–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ä–≤ —Ñ–∞–π–ª–∞ /proc/acpi/wakeup, –Ω–µ–≥–æ–≤–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ —Å–µ –ø—Ä–æ–º–µ–Ω—è
–æ—Ç disabled –Ω–∞ enabled –∏–ª–∏ –æ–±—Ä–∞—Ç–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –∞–∫–æ —Ñ–∞–π–ª—ä—Ç –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞–∫—Ç–æ –ø—Ä–∏–º–µ—Ä–∞ –ø–æ-–≥–æ—Ä–µ, –ø—Ä–∏
–∑–∞–ø–∏—Å –Ω–∞ XHC –≤ –Ω–µ–≥–æ, —Ç—Ä–µ—Ç–∏—è—Ç —Ä–µ–¥ —â–µ —Å–µ –ø—Ä–æ–º–µ–Ω–∏ –Ω–∞:

  XHC    S3      *disabled     pci:0000:00:14.0

–ü—Ä–∏ –∑–∞–ø–∏—Å –Ω–∞ HDAS , —à–µ—Å—Ç–∏—è—Ç —Ä–µ–¥ —â–µ —Å–µ –ø—Ä–æ–º–µ–Ω–∏ –Ω–∞:

  HDAS   S4      *disabled    pci:0000:00:1f.3

–î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω –µ —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–µ–Ω —Ñ–∞–π–ª, –∫–æ–π—Ç–æ –æ–ø–∏—Å–≤–∞ –∂–µ–ª–∞–Ω –∫–æ–º–ø–ª–µ–∫—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ wakeup —Å—ä–±–∏—Ç–∏—è. –ü—Ä–∏–º–µ—Ä–µ–Ω —Ñ–∞–π–ª:
````text
# comment bar
GLAN disabled
LID enabled # comment foo
````
–∫—ä–¥–µ—Ç–æ:
- –∑–Ω–∞–∫—ä—Ç –¥–∏–µ–∑ (# ) –µ –∑–Ω–∞–∫ –∑–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä –¥–æ –∫—Ä–∞—è –Ω–∞ —Ä–µ–¥–∞;
- —Ä–µ–¥–æ–≤–µ—Ç–µ –±–∏ —Ç—Ä—è–±–≤–∞–ª–æ –¥–∞ —Å–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç –∏–º–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –∂–µ–ª–∞–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ç–∞
–∑–∞ —Å—ä–±—É–∂–¥–∞–Ω–µ –ø—Ä–∏ —Å—ä–±–∏—Ç–∏—è –æ—Ç —Ç–æ–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ —Å whitespace.

–ù–∞–ø–∏—à–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –ø—Ä–∏ –ø–æ–¥–∞–¥–µ–Ω –ø—ä—Ä–≤–∏ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä –∏–º–µ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–µ–Ω —Ñ–∞–π–ª –≤ –≥–æ—Ä–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç
–æ—Å–∏–≥—É—Ä—è–≤–∞ –∏—Å–∫–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ —Å—ä–±—É–∂–¥–∞–Ω–µ. –ê–∫–æ –≤—ä–≤ —Ñ–∞–π–ª–∞ –∏–º–∞ —Ä–µ–¥ –∑–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫–æ–µ—Ç–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞,
—Å–∫—Ä–∏–ø—Ç—ä—Ç –¥–∞ –∏–∑–≤–µ–∂–¥–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ. –û–±—ä—Ä–Ω–µ—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞ –∑–∞ –≥—Ä–µ—à–∫–∏ –∏ —Å—ä–æ–±—â–µ–Ω–∏—è—Ç–∞
–∫—ä–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è ‚Äì –∏—Å–∫–∞–º–µ —Å–∫—Ä–∏–ø—Ç—ä—Ç –¥–∞ –±—ä–¥–µ —É–¥–æ–±–µ–Ω –∏ –≤–∞–ª–∏–¥–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.

````shell
#!/bin/bash

CONFIG_FILE="$1"

if [[ "$#" -ne 1 ]] || [[ ! -f "$CONFIG_FILE" ]]; then
    echo "Usage: $0 <config_file>"
    exit 1
fi

current_settings=$(cat /proc/acpi/wakeup)

while read -r line; do
  
    line=$(echo "$line" | sed 's/#.*//')
    
    if [[ -z "$line" ]]; then
        continue
    fi

    device_name=$(echo "$line" | awk '{print $1}')
    desired_status=$(echo "$line" | awk '{print $2}')

    if echo "$current_settings" | grep -q "^$device_name"; then
        if [[ "$desired_status" == "enabled" ]]; then
              current_settings=$(echo "$current_settings" | sed "/^$device_name[[:space:]]/s/\*disabled/\*enabled/")
        elif [[ "$desired_status" == "disabled" ]]; then
            current_settings=$(echo "$current_settings" | sed "/^$device_name[[:space:]]/s/\*enabled/\*disabled/")
        fi
    else
        echo "WARN: Device '$device_name' does not exist in /proc/acpi/wakeup!"
    fi
done < "$CONFIG_FILE"

echo "$current_settings" > /proc/acpi/wakeup
exit 0
````
### 2022-SE-02
 –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∞ –µ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –±–µ–∫—ä–ø–≤–∞–Ω–µ –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∏, –∫–æ—è—Ç–æ –¥—ä—Ä–∂–∏ –Ω–∞–ø—Ä–∞–≤–µ–Ω–∏—Ç–µ –∞—Ä—Ö–∏–≤–∏ –≤
–≥–ª–∞–≤–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–∫–æ—è—Ç–æ —â–µ –Ω–∞—Ä–∏—á–∞–º–µ fubar), –≤ –∫–æ—è—Ç–æ –∏–º–∞ —á–µ—Ç–∏—Ä–∏ –ø–æ–¥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–ª–∞—Å–æ–≤–µ
–±–µ–∫—ä–ø–∏:
- 0 ‚Äì —Å—ä–¥—ä—Ä–∂–∞ –≥–æ–¥–∏—à–Ω–∏ –±–µ–∫—ä–ø–∏
- 1 ‚Äì —Å—ä–¥—ä—Ä–∂–∞ –º–µ—Å–µ—á–Ω–∏ –±–µ–∫—ä–ø–∏
- 2 ‚Äì —Å—ä–¥—ä—Ä–∂–∞ —Å–µ–¥–º–∏—á–Ω–∏ –±–µ–∫—ä–ø–∏
- 3 ‚Äì —Å—ä–¥—ä—Ä–∂–∞ –¥–Ω–µ–≤–Ω–∏ –±–µ–∫—ä–ø–∏

–í—Å—è–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—ä–¥—ä—Ä–∂–∞ –∞—Ä—Ö–∏–≤–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ —Å –∏–º–µ–Ω–∞ –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç hostname-area-YYYYMMDD.tar.xz,
–∫—ä–¥–µ—Ç–æ:
- hostname –∏–º–µ—Ç–æ –Ω–∞ –Ω—è–∫–∞–∫–≤–∞ –º–∞—à–∏–Ω–∞, –∫–æ—è—Ç–æ –µ –±–µ–∫—ä–ø–≤–∞–Ω–∞;
- area –µ —Ç–∏–ø—ä—Ç –±–µ–∫—ä–ø –∑–∞ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∞—Ç–∞ –º–∞—à–∏–Ω–∞;
- YYYYMMDD –µ –¥–∞—Ç–∞—Ç–∞, –Ω–∞ –∫–æ—è—Ç–æ –µ –Ω–∞–ø—Ä–∞–≤–µ–Ω –±–µ–∫—ä–ø–∞;
- –Ω–∏–∫–æ–µ –æ—Ç –≥–æ—Ä–Ω–∏—Ç–µ –ø–æ–ª–µ—Ç–∞ –Ω–µ –º–æ–∂–µ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞ —Ç–∏—Ä–µ –∏–ª–∏ —Ç–æ—á–∫–∞;
- –Ω—è–∫–æ–∏ –æ—Ç —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –º–æ–≥–∞—Ç –¥–∞ —Å–∞ symlink-–æ–≤–µ.

–ü—Ä–∏–º–µ—Ä–Ω–∏ –∏–º–µ–Ω–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ:
````text
astero-etc-20220323.tar.xz stratios-etc-20220428.tar.xz  nestor-db-20220404.tar.xz 
gila-srv-20220405.tar.xz  catalyst-var-20220406.tar.xz  drake-home-20220404.tar.xz 
dominix-var-20220404.tar.xz 
````

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è—Ç–∞ –æ—Ç hostname –∏ area –¥–µ—Ñ–∏–Ω–∏—Ä–∞ —É–Ω–∏–∫–∞–ª–µ–Ω –æ–±–µ–∫—Ç –∑–∞ –±–µ–∫—ä–ø–≤–∞–Ω–µ. –í—Å–∏—á–∫–∏ –∞—Ä—Ö–∏–≤–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ
—Å–∞ –ø—ä–ª–Ω–æ—Ü–µ–Ω–Ω–∏ –±–µ–∫—ä–ø–∏ –Ω–∞ –¥–∞–¥–µ–Ω –æ–±–µ–∫—Ç –∏ —Å–∞ –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–∏ –∑–∞ –Ω–µ–≥–æ–≤–æ—Ç–æ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –ø—Ä–∏ –Ω—É–∂–¥–∞ (–∑–∞–±.
–∏–∑–≤—ä–Ω –æ–±—Ö–≤–∞—Ç–∞ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞).
–ê–∫–æ –¥–∞–¥–µ–Ω —Ñ–∞–π–ª –µ symlink, —Ç–æ —Ç–æ–π –º–æ–∂–µ –¥–∞ –µ –≤–∞–ª–∏–¥–µ–Ω –∏–ª–∏ —Å—á—É–ø–µ–Ω. Symlink-–æ–≤–µ—Ç–µ —Å–∞ —Å—ä–∑–¥–∞–¥–µ–Ω–∏ –∑–∞ —É–¥–æ–±—Å—Ç–≤–æ
–∏ –Ω–µ –≥–∏ —Å—á–∏—Ç–∞–º–µ –∑–∞ –ø—ä–ª–Ω–æ—Ü–µ–Ω–Ω–∏ –±–µ–∫—ä–ø–∏.
–ü–æ–ª–∏—Ç–∏–∫–∞—Ç–∞ –Ω–∏ –∑–∞ –±–µ–∫—ä–ø –∫–∞–∑–≤–∞, —á–µ –∑–∞ –¥–∞ –∏–º–∞–º–µ –≤–∞–ª–∏–¥–µ–Ω –±–µ–∫—ä–ø –Ω–∞ –¥–∞–¥–µ–Ω –æ–±–µ–∫—Ç, –∑–∞ –Ω–µ–≥–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞–º–µ
–º–∏–Ω–∏–º—É–º 1 –≥–æ–¥–∏—à–µ–Ω, 2 –º–µ—Å–µ—á–Ω–∏, 3 —Å–µ–¥–º–∏—á–Ω–∏ –∏ 4 –¥–Ω–µ–≤–Ω–∏ –ø—ä–ª–Ω–æ—Ü–µ–Ω–Ω–∏ –±–µ–∫—ä–ø–∞.

–í–∞–∂–Ω–æ—Å—Ç:
- –æ–±–µ–∫—Ç–∏—Ç–µ —Å–∞ —Ä–∞–≤–Ω–∏ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç –ø–æ–º–µ–∂–¥—É —Å–∏;
- –≤–∞–∂–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –∫–ª–∞—Å–æ–≤–µ—Ç–µ –±–µ–∫—ä–ø–∏ –µ –≤—ä–≤ –≤—ä–∑—Ö–æ–¥—è—â —Ä–µ–¥ –ø–æ –≥–æ—Ä–Ω–∏—è —Å–ø–∏—Å—ä–∫, —Ç.–µ. –ø—Ä–∏ —Ä–∞–≤–Ω–∏ –¥—Ä—É–≥–∏
—É—Å–ª–æ–≤–∏—è –¥–Ω–µ–≤–Ω–∏—Ç–µ –±–µ–∫—ä–ø–∏ —Å–∞ –ø–æ-—Ü–µ–Ω–Ω–∏ –æ—Ç —Å–µ–¥–º–∏—á–Ω–∏—Ç–µ –∏ —Ç.–Ω.;
- –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –µ–¥–∏–Ω –∫–ª–∞—Å –±–µ–∫—ä–ø–∏ –ø–æ-–Ω–æ–≤–∏—Ç–µ –±–µ–∫—ä–ø–∏ —Å–∞ –ø–æ-–≤–∞–∂–Ω–∏ –æ—Ç –ø–æ-—Å—Ç–∞—Ä–∏—Ç–µ.

–ù–∞–ø–∏—à–µ—Ç–µ shell —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –ø—Ä–∏–µ–º–∞ –¥–≤–∞ –¥–≤–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ ‚Äì –∏–º–µ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
–∏ —á–∏—Å–ª–æ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ [1, 99]. –ü—Ä–∏–º–µ—Ä–Ω–æ –∏–∑–≤–∏–∫–≤–∞–Ω–µ: ./foo.sh ./bar/ 30 –∫—ä–¥–µ—Ç–æ:
- –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ –≥–ª–∞–≤–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (fubar) –Ω–∞ –æ–ø–∏—Å–∞–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –±–µ–∫–ø—ä–≤–∞–Ω–µ;
- —á–∏—Å–ª–æ—Ç–æ –¥–µ—Ñ–∏–Ω–∏—Ä–∞ –∫–æ–ª–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –µ –º–∞–∫—Å–∏–º–∞–ª–Ω–æ—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–æ –º—è—Å—Ç–æ –Ω–∞ —Ñ–∞–π–ª–æ–≤–∞—Ç–∞
—Å–∏—Å—Ç–µ–º–∞, –≤ –∫–æ—è—Ç–æ —Å–µ –Ω–∞–º–∏—Ä–∞ –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è.

–ó–∞ —É–¥–æ–±—Å—Ç–≤–æ –ø—Ä–∏–µ–º–∞–º–µ, —á–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ fubar –∏ –≤—Å–∏—á–∫–∏ –æ–±–µ–∫—Ç–∏ –≤ –Ω–µ—è —Å–µ –Ω–∞–º–∏—Ä–∞—Ç –≤ –µ–¥–Ω–∞ –∏ —Å—ä—â–∞ —Ñ–∞–π–ª–æ–≤–∞
—Å–∏—Å—Ç–µ–º–∞.
–£–ø—ä—Ç–≤–∞–Ω–µ: –ö–æ–º–∞–Ω–¥–∞—Ç–∞ df –∏–∑–≤–∏–∫–∞–Ω–∞ —Å –∞—Ä–≥—É–º–µ–Ω—Ç –∏–º–µ –Ω–∞ —Ñ–∞–π–ª/–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤—Ä—ä—â–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Ñ–∞–π–ª–æ–≤–∞—Ç–∞
—Å–∏—Å—Ç–µ–º–∞, –≤ –∫–æ—è—Ç–æ —Ç–æ–π —Å–µ –Ω–∞–º–∏—Ä–∞. 
–ü—Ä–∏–º–µ—Ä:
````shell
$df ./README.md
````
````text
Filesystem          1K-blocks   Used        Available   Use%    Mounted on
/dev/mapper/o7-hm   100663296   61735732    37288764    63%     /home
````

–°–∫—Ä–∏–ø—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑—Ç—Ä–∏–≤–∞ –º–∏–Ω–∏–º–∞–ª–µ–Ω –±—Ä–æ–π –ø—ä–ª–Ω–æ—Ü–µ–Ω–Ω–∏ –∞—Ä—Ö–∏–≤–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ —Ç–∞–∫–∞, —á–µ:
- –≤—Å–µ–∫–∏ –æ–±–µ–∫—Ç –¥–∞ –∏–º–∞ –≤–∞–ª–∏–¥–µ–Ω –±–µ–∫—ä–ø;
- –æ–±—Ä—ä—â–∞ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—Ç–µ –ø–æ-–≥–æ—Ä–µ –≤–∞–∂–Ω–æ—Å—Ç–∏;
- –ø—Ä–æ—Ü–µ–Ω—Ç–∏—Ç–µ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–æ –º—è—Å—Ç–æ –≤—ä—Ä—Ö—É —Ñ–∞–π–ª–æ–≤–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–∞ –µ –Ω–µ –ø–æ–≤–µ—á–µ –æ—Ç –ø–æ–¥–∞–¥–µ–Ω–∏—è—Ç –ø–∞—Ä–∞–º–µ—Ç—ä—Ä
(a –∞–∫–æ —Ç–æ–≤–∞ –µ –Ω–µ–≤—ä–∑–º–æ–∂–Ω–æ, —Å–∫—Ä–∏–ø—Ç—ä—Ç –¥–∞ –æ—Å–≤–æ–±–æ–¥–∏ –∫–æ–ª–∫–æ—Ç–æ –º–æ–∂–µ –ø–æ–≤–µ—á–µ –º—è—Å—Ç–æ, –±–µ–∑ –¥–∞ –Ω–∞—Ä—É—à–∞–≤–∞
–≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏—Ç–µ –Ω–∞ –±–µ–∫—ä–ø–∏—Ç–µ –Ω–∞ –æ–±–µ–∫—Ç–∏—Ç–µ);
- –Ω–µ –µ –¥–æ–ø—É—Å—Ç–∏–º–æ —Å–ª–µ–¥ —Ä–∞–±–æ—Ç–∞—Ç–∞ –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞ –¥–∞ –æ—Å—Ç–∞–Ω–∞—Ç —Å—á—É–ø–µ–Ω–∏ symlink‚Äì–æ–≤–µ.

````shell
#!/bin/bash

if [[ "$#" -ne 2 ]]; then
    echo "Usage: $0 <directory> <max_percent>"
    exit 1
fi

backup_dir=$1
max_percent=$2

if [[ ! -d "$backup_dir" ]]; then
    echo "Error: Directory $backup_dir does not exist."
    exit 1
fi

current_usage=$(df "$backup_dir" | awk 'NR==2 {print $5}' | sed 's/%//')

if [[ "$current_usage" -le "$max_percent" ]]; then
    echo "Current usage ($current_usage%) is within the limit ($max_percent%). No action needed."
    exit 0
fi

find -L "$backup_dir" -type l -delete

backup_files=$(find "$backup_dir" -type f -name "*.tar.xz" | awk -F '[/-]' '{print $(NF-1) " " $0}' | sort -k1,1n | awk '{print $2}')

for file in $backup_files; do
    filename=$(basename "$file")
    hostname=$(echo "$filename" | cut -d'-' -f1)
    area=$(echo "$filename" | cut -d'-' -f2)

    min_yearly=1
    min_monthly=2
    min_weekly=3
    min_daily=4

    yearly_count=$(find "$backup_dir/0" -type f -name "$hostname-$area-*.tar.xz" | wc -l)
    monthly_count=$(find "$backup_dir/1" -type f -name "$hostname-$area-*.tar.xz" | wc -l)
    weekly_count=$(find "$backup_dir/2" -type f -name "$hostname-$area-*.tar.xz" | wc -l)
    daily_count=$(find "$backup_dir/3" -type f -name "$hostname-$area-*.tar.xz" | wc -l)

    if [[ "$yearly_count" -ge "$min_yearly" && "$monthly_count" -ge "$min_monthly" && "$weekly_count" -ge "$min_weekly" && "$daily_count" -ge "$min_daily" ]]; then
        rm -f "$file"
        echo "Removed $file to free up space."

        current_usage=$(df "$backup_dir" | awk 'NR==2 {print $5}' | sed 's/%//')
        if [ "$current_usage" -le "$max_percent" ]; then
            break
        fi
    fi
done

exit 0
````