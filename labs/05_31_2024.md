# Notes from 31st of May


### Pipes
    - pipe, pipe2 to create pipes
    - when we use pipes, we should immediately close the "ends" that we do not use (example close pipe_fd[0]) -> forgetting closing generally leads to deadlocks 
    - using multiple pipes is always better than having one pipe which is used in all child processes and the parent process 



```c
#include <stdint.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <err.h>

int main(int argc, char* argv[]) {
    // TODO: add the code
}
```


#### df -h | cut -d ' ' -f 1

```c
#include <stdint.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <err.h>

int main(int argc, char* argv[]) {
    int dfToCut[2];
    pipe(dfToCut);

    if(fork() == 0){
        // df -h
        close(dfToCut[0]); // closing the read

        dup2(dfToCut[1], 1);
        close(dfToCut[1]);

        execlp("df", "df", "-h", (char*)NULL);
        err(1, "exec df");
    }
    // parent
    // cut -d ' ' -f 1
    close(dfToCut[1]);

    dup2(dfToCut[0], 0);
    close(dfToCut[0]);

    execlp("cut", "cut", "-d", " ", "-f", "1", (char*)NULL);
    err(1, "exec cut");

    return 0;
}
```
